[{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Mark Corrales. Author, maintainer.","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Corrales M (2024). census2020download: 2020 Census Blocks Tools Download FTP. R package version 2.3.0, https://github.com/ejanalysis/census2020download, https://ejanalysis.github.io/census2020download/.","code":"@Manual{,   title = {census2020download: 2020 Census Blocks and Tools to Download from FTP},   author = {Mark Corrales},   year = {2024},   note = {R package version 2.3.0, https://github.com/ejanalysis/census2020download},   url = {https://ejanalysis.github.io/census2020download/}, }"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/index.html","id":"download-all-census-2020-blocks-to-use-in-ejam","dir":"","previous_headings":"","what":"2020 Census Blocks and Tools to Download from FTP","title":"2020 Census Blocks and Tools to Download from FTP","text":"package just set helper functions used EJAM package. creates block datasets (blockgroup tables) use EJAM package. basic functions downloading FTP, unzipping, reading 2020 Census data US States data.table format. can retain key variables like lat lon block internal point FIPS codes population count weight area (effective radius) information see census2020download package documentation census2020download package github repository EJAM package Census vs ACS geos info Key functions data.tables created include census2020_get_data() Download/ Unzip/ Read/ Clean data US Census blocks census2020_save_datasets() Use data create separate data.tables, save use EJAM package. Key data.table objects created: blockid2fips - data.table FIPS code blockid lookup blockpoints - data.table latitude longitude internal points quaddata - data.table xyz format locations blocks, used create spatial index blocks EJAM package. blockwts - data.table Census 2020 population-based weight fraction parent block group population, size block","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/add_block_radius_miles_to_dt.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a new column in the data.table passed to this function (by reference) — add_block_radius_miles_to_dt","title":"Create a new column in the data.table passed to this function (by reference) — add_block_radius_miles_to_dt","text":"Create new column data.table passed function (reference)","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/add_block_radius_miles_to_dt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a new column in the data.table passed to this function (by reference) — add_block_radius_miles_to_dt","text":"","code":"add_block_radius_miles_to_dt(dt, area_sqmi)"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/add_block_radius_miles_to_dt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a new column in the data.table passed to this function (by reference) — add_block_radius_miles_to_dt","text":"dt data.table area_sqmi vector numbers area square miles.","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/add_block_radius_miles_to_dt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a new column in the data.table passed to this function (by reference) — add_block_radius_miles_to_dt","text":"NULL. side effect new column created reference data.table referred dt, data.table passed function actually gets changed reference calling environment without function needing return anything.","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/add_block_radius_miles_to_dt.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a new column in the data.table passed to this function (by reference) — add_block_radius_miles_to_dt","text":"Note table magically gets updated just calling function – assign function results object! just turn table NULL.","code":""},{"path":[]},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/add_block_radius_miles_to_dt.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a new column in the data.table passed to this function (by reference) — add_block_radius_miles_to_dt","text":"","code":"passed_dt <- data.table::data.table(a = 1:10)   x <- add_block_radius_miles_to_dt(passed_dt, 9001:9010) #> Error in add_block_radius_miles_to_dt(passed_dt, 9001:9010): could not find function \"add_block_radius_miles_to_dt\"   is.null(x) #> Error: object 'x' not found   passed_dt #>         a #>     <int> #>  1:     1 #>  2:     2 #>  3:     3 #>  4:     4 #>  5:     5 #>  6:     6 #>  7:     7 #>  8:     8 #>  9:     9 #> 10:    10"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/area_sqmi_from_area_sqmeters.html","id":null,"dir":"Reference","previous_headings":"","what":"helper - converts units — area_sqmi_from_area_sqmeters","title":"helper - converts units — area_sqmi_from_area_sqmeters","text":"helper - converts units","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/area_sqmi_from_area_sqmeters.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"helper - converts units — area_sqmi_from_area_sqmeters","text":"","code":"area_sqmi_from_area_sqmeters(area_sqmeters)"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/area_sqmi_from_area_sqmeters.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"helper - converts units — area_sqmi_from_area_sqmeters","text":"area_sqmeters vector areas square meters","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/area_sqmi_from_area_sqmeters.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"helper - converts units — area_sqmi_from_area_sqmeters","text":"vector areas square miles","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/area_sqmi_from_area_sqmeters.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"helper - converts units — area_sqmi_from_area_sqmeters","text":"area data.table blockwts initial cleaning called area square meters","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/block_radius_miles_from_area_sqmi.html","id":null,"dir":"Reference","previous_headings":"","what":"simple formula to calculate radius given area\nJust the square root of (area/pi) — block_radius_miles_from_area_sqmi","title":"simple formula to calculate radius given area\nJust the square root of (area/pi) — block_radius_miles_from_area_sqmi","text":"simple formula calculate radius given area Just square root (area/pi)","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/block_radius_miles_from_area_sqmi.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"simple formula to calculate radius given area\nJust the square root of (area/pi) — block_radius_miles_from_area_sqmi","text":"","code":"block_radius_miles_from_area_sqmi(area_sqmi)"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/block_radius_miles_from_area_sqmi.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"simple formula to calculate radius given area\nJust the square root of (area/pi) — block_radius_miles_from_area_sqmi","text":"area_sqmi vector numbers area block, square miles. area available square meters, can converted like : area_sqmi <- census2020download:::area_sqmi_from_area_sqmeters(area_sqmeters)","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/block_radius_miles_from_area_sqmi.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"simple formula to calculate radius given area\nJust the square root of (area/pi) — block_radius_miles_from_area_sqmi","text":"vector numbers shape input","code":""},{"path":[]},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/blockid2fips.html","id":null,"dir":"Reference","previous_headings":"","what":"Census FIPS code of each US Census 2020 block — blockid2fips","title":"Census FIPS code of each US Census 2020 block — blockid2fips","text":"data.table use EJAM","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/blockid2fips.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Census FIPS code of each US Census 2020 block — blockid2fips","text":"See EJAM package info. Created census2020_get_data() census2020_save_datasets() package can create data table store . Rows: 8,174,955 Columns: blockid (joins among tables blockwts, blockpoints, quaddata, blockid2fips) unique integer 1 number rows (blocks), used efficient ID 15-character FIPS code. blockfips (15-character string FIPS code)","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/blockpoints.html","id":null,"dir":"Reference","previous_headings":"","what":"lat/lon location of internal point of each Census 2020 block, used in EJAM package — blockpoints","title":"lat/lon location of internal point of each Census 2020 block, used in EJAM package — blockpoints","text":"data.table use EJAM","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/blockpoints.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"lat/lon location of internal point of each Census 2020 block, used in EJAM package — blockpoints","text":"See EJAM package info. Created census2020_get_data() census2020_save_datasets() package can create data table store . Rows: 8,174,955 Columns: blockid (joins among tables blockwts, blockpoints, quaddata, blockid2fips) unique integer 1 number rows (blocks), used efficient ID 15-character FIPS code. lat  Latitude decimal degrees lon  Longitude decimal degrees","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/blockwts.html","id":null,"dir":"Reference","previous_headings":"","what":"2020 Census block weights (population as share of overall block group) — blockwts","title":"2020 Census block weights (population as share of overall block group) — blockwts","text":"data.table use EJAM","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/blockwts.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"2020 Census block weights (population as share of overall block group) — blockwts","text":"See EJAM package info. Created census2020_get_data() census2020_save_datasets() package can create data table store . Rows: 8,174,955 Columns: blockid (joins among tables blockwts, blockpoints, quaddata, blockid2fips) unique integer 1 number rows (blocks), used efficient ID 15-character FIPS code. bgid unique ID block group contains block blockwt used EJAM package function doaggregate() summarize block group score average person location within 1 mile point, population weighted mean blockgroup scores blocks area. blockwt block's population weight, calculated block population fraction parent blockgroup pop. Based latest decennial Census table population count block. table weights can used calculating weighted mean sum blockgroup score buffer blocks given blockgroup buffer. sum weights blocks tells fraction whole parent blockgroup's population count blocks (ones found inside buffer, example). block_radius_miles effective radius block, pi times radius squared block area square miles. gets used adjust distances sites short distances internal point.","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_clean.html","id":null,"dir":"Reference","previous_headings":"","what":"Start to clean up download block data Renames columns, drops most, calculates total area. — census2020_clean","title":"Start to clean up download block data Renames columns, drops most, calculates total area. — census2020_clean","text":"Start clean download block data Renames columns, drops , calculates total area.","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_clean.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Start to clean up download block data Renames columns, drops most, calculates total area. — census2020_clean","text":"","code":"census2020_clean(x, cols_to_keep = c(\"blockfips\", \"lat\", \"lon\", \"pop\", \"area\"))"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_clean.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Start to clean up download block data Renames columns, drops most, calculates total area. — census2020_clean","text":"x data census2020_read() cols_to_keep optional, (renamed) columns retain return","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_clean.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Start to clean up download block data Renames columns, drops most, calculates total area. — census2020_clean","text":"data.table columns default:  blockfips lat lon pop area","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_clean.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Start to clean up download block data Renames columns, drops most, calculates total area. — census2020_clean","text":"Renames drops columns based names census_col_names_map parameter cols_to_keep, see census_col_names_map retained. Returns table data.table format. area square meters sum land water areas.","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_download.html","id":null,"dir":"Reference","previous_headings":"","what":"Download Census 2020 data files from FTP by State/DC/PR — census2020_download","title":"Download Census 2020 data files from FTP by State/DC/PR — census2020_download","text":"Download Census 2020 data files FTP State/DC/PR","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_download.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download Census 2020 data files from FTP by State/DC/PR — census2020_download","text":"","code":"census2020_download(   folder = NULL,   mystates = c(state.abb, \"DC\", \"PR\"),   allstates = c(state.abb, \"DC\", \"PR\"),   baseurl =     \"https://www2.census.gov/programs-surveys/decennial/2020/data/01-Redistricting_File--PL_94-171/\",   urlmiddle = \"\",   zipnames_suffix = \"2020.pl.zip\",   overwrite = TRUE )"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_download.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download Census 2020 data files from FTP by State/DC/PR — census2020_download","text":"folder Default tempdir. Folder subfolder data created exist. mystates Default 50 states + DC + PR . Island Areas VI GU MP . Character vector 2 letter abbreviations. allstates Default mystates default. baseurl Default FTP folder data urlmiddle Default empty States info, Island Areas, urlmiddle = \"demographic--housing-characteristics-file/\" zipnames_suffix last part filenames Census provides - default work overwrite set FALSE skip download filename already folder, note check existing file corrupt/size zero/obsolete/etc.","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_download.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download Census 2020 data files from FTP by State/DC/PR — census2020_download","text":"Effect download save locally number data files.","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_download.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Download Census 2020 data files from FTP by State/DC/PR — census2020_download","text":"Attempts download basic data files specified states/etc. US Census Bureau's FTP site Decennial Census file data. see (https://www2.census.gov/programs-surveys/decennial/2020/technical-documentation/complete-tech-docs/summary-file/2020Census_PL94_171Redistricting_StatesTechDoc_English.pdf) see (https://www2.census.gov/programs-surveys/decennial/2020/data/island-areas/american-samoa/demographic--housing-characteristics-file/2020-iac-dhc-readme.pdf)","code":""},{"path":[]},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_download.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download Census 2020 data files from FTP by State/DC/PR — census2020_download","text":"","code":"if (FALSE) { # \\dontrun{  # library(census2020download)  census2020_download('./census2020zip', mystates = c('RI', 'DE'))  census2020_unzip('./census2020zip','./census2020out')  c2 <- census2020_read(folder = './census2020out', mystates = c('RI', 'DE'))  save(c2,file = 'census2020blocks.rdata')  dim(c2)  str(c2)  head(c2)  sum(c2$POP100)  plot(    c2$INTPTLON[substr(c2$GEOCODE,1,2)=='10'],    c2$INTPTLAT[substr(c2$GEOCODE,1,2)=='10'], pch='.')  } # }"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_download_islandareas.html","id":null,"dir":"Reference","previous_headings":"","what":"Download Census 2020 data files from FTP - For Island Areas VI GU MP AS — census2020_download_islandareas","title":"Download Census 2020 data files from FTP - For Island Areas VI GU MP AS — census2020_download_islandareas","text":"Download Census 2020 data files FTP - Island Areas VI GU MP ","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_download_islandareas.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download Census 2020 data files from FTP - For Island Areas VI GU MP AS — census2020_download_islandareas","text":"","code":"census2020_download_islandareas(   folder = NULL,   mystates = c(\"VI\", \"GU\", \"MP\", \"AS\"),   allstates = c(\"VI\", \"GU\", \"MP\", \"AS\"),   baseurl = \"https://www2.census.gov/programs-surveys/decennial/2020/data/island-areas/\",   urlmiddle = \"demographic-and-housing-characteristics-file/\",   zipnames_suffix = \"2020.dhc.zip\" )"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_download_islandareas.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download Census 2020 data files from FTP - For Island Areas VI GU MP AS — census2020_download_islandareas","text":"folder Default tempdir. Folder subfolder data created exist. mystates Character vector 2 letter abbreviations, optional, Default VI GU MP allstates Default VI GU MP baseurl default FTP folder data urlmiddle Default empty States info, Island Areas, urlmiddle = \"demographic--housing-characteristics-file/\" zipnames_suffix last part filenames Census provides - default work","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_download_islandareas.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download Census 2020 data files from FTP - For Island Areas VI GU MP AS — census2020_download_islandareas","text":"Effect download save locally number data files.","code":""},{"path":[]},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_download_islandareas.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download Census 2020 data files from FTP - For Island Areas VI GU MP AS — census2020_download_islandareas","text":"","code":"if (FALSE) { # \\dontrun{  #  } # }"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_get_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Download and clean up US States,DC,PR block data Census 2020 (for EJAM) — census2020_get_data","title":"Download and clean up US States,DC,PR block data Census 2020 (for EJAM) — census2020_get_data","text":"Download clean US States,DC,PR block data Census 2020 (EJAM)","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_get_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download and clean up US States,DC,PR block data Census 2020 (for EJAM) — census2020_get_data","text":"","code":"census2020_get_data(   folder = NULL,   folderout = NULL,   mystates = c(state.abb, \"DC\", \"PR\"),   do_download = TRUE,   do_unzip = TRUE,   do_read = TRUE,   do_clean = TRUE,   overwrite = TRUE,   ... )"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_get_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download and clean up US States,DC,PR block data Census 2020 (for EJAM) — census2020_get_data","text":"folder downloaded files. Default tempdir. Folder created exist. folderout path assembled results files, default folder set . mystates default DC, PR, 50 states – lacks VI/GU/MP/do_download whether census2020_download() do_unzip whether census2020_unzip() do_read whether census2020_read() do_clean whether census2020_clean() overwrite passed census2020_download() ... passed census2020_read()","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_get_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download and clean up US States,DC,PR block data Census 2020 (for EJAM) — census2020_get_data","text":"invisibly returns data.table US Census blocks columns like blockid lat lon pop area (area square meters), intermediate info depending do_read, do_clean, etc.","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_get_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Download and clean up US States,DC,PR block data Census 2020 (for EJAM) — census2020_get_data","text":"","code":"To create certain data tables used by EJAM,   EJAM uses scripts like EJAM/data-raw/datacreate_....R   to do something like this:    blocks <- census2020_get_data()   mylist <- census2020_save_datasets(blocks)    bgid2fips    = mylist$bgid2fips   blockid2fips = mylist$blockid2fips   blockpoints  = mylist$blockpoints   blockwts     = mylist$blockwts   quaddata     = mylist$quaddata"},{"path":[]},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_get_data_islandareas.html","id":null,"dir":"Reference","previous_headings":"","what":"Download and clean up VI,GU,MP,AS Island Areas block data Census 2020 (for EJAM) — census2020_get_data_islandareas","title":"Download and clean up VI,GU,MP,AS Island Areas block data Census 2020 (for EJAM) — census2020_get_data_islandareas","text":"Download clean VI,GU,MP,Island Areas block data Census 2020 (EJAM)","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_get_data_islandareas.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download and clean up VI,GU,MP,AS Island Areas block data Census 2020 (for EJAM) — census2020_get_data_islandareas","text":"","code":"census2020_get_data_islandareas(   folder = NULL,   mystates = c(\"VI\", \"GU\", \"MP\", \"AS\"),   do_download = TRUE,   do_unzip = TRUE,   do_read = TRUE,   do_clean = TRUE )"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_get_data_islandareas.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download and clean up VI,GU,MP,AS Island Areas block data Census 2020 (for EJAM) — census2020_get_data_islandareas","text":"folder Default tempdir. Folder created exist. mystates Default c('VI','GU','MP','') do_download whether census2020_download() do_unzip whether census2020_unzip() do_read whether census2020_read() do_clean whether census2020_clean()","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_get_data_islandareas.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download and clean up VI,GU,MP,AS Island Areas block data Census 2020 (for EJAM) — census2020_get_data_islandareas","text":"invisibly returns list tables","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_read.html","id":null,"dir":"Reference","previous_headings":"","what":"Compile Census 2020 block data for all US states once downloaded and unzipped used by census2020_get_data() — census2020_read","title":"Compile Census 2020 block data for all US states once downloaded and unzipped used by census2020_get_data() — census2020_read","text":"Compile Census 2020 block data US states downloaded unzipped used census2020_get_data()","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_read.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compile Census 2020 block data for all US states once downloaded and unzipped used by census2020_get_data() — census2020_read","text":"","code":"census2020_read(   folder = NULL,   filenumbers = 1,   mystates = NULL,   sumlev = 750,   best_header_cols = c(\"LOGRECNO\", \"GEOCODE\", \"AREALAND\", \"AREAWATR\", \"POP100\", \"HU100\",     \"INTPTLAT\", \"INTPTLON\"),   best_data_cols = paste0(\"P00\", (20001:20011)) )"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_read.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compile Census 2020 block data for all US states once downloaded and unzipped used by census2020_get_data() — census2020_read","text":"folder path filenumbers vector 1,2,3 – default file 1. File01 Tables P1 P2. File02 Tables P3, P4, H1. File03 Table P5. mystates can vector 2-letter abbreviations states sumlev default 750, blocks best_header_cols default key columns like POP100, GEOCODE (fips), etc. best_data_cols default key race ethnicity fields","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_read.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compile Census 2020 block data for all US states once downloaded and unzipped used by census2020_get_data() — census2020_read","text":"data.frame 1 row per block, example","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_read.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compile Census 2020 block data for all US states once downloaded and unzipped used by census2020_get_data() — census2020_read","text":"extensively tested. Attempts read files already downloaded unzipped, data files specified states US Census Bureau's FTP site Decennial Census file data. see https://www2.census.gov/programs-surveys/decennial/2020/technical-documentation/complete-tech-docs/summary-file/2020Census_PL94_171Redistricting_StatesTechDoc_English.pdf Also look package totalcensus see Census website list possible fields etc.","code":"for example:  #  AREALAND      Area (Land)  #  AREAWATR      Area (Water)   #  BASENAME      Area Base Name  #  NAME          Area Name-Legal/Statistical Area Description (LSAD) Term-Part Indicator  #  FUNCSTAT      Functional Status Code  #  GCUNI         Geographic Change User Note Indicator   #  POP100        Population Count (100  #  HU100         Housing Unit Count (100  #  INTPTLAT      Internal Point (Latitude)  #  INTPTLON      Internal Point (Longitude)   File 1 has Table P1 and   Table P2. HISPANIC OR LATINO, AND NOT HISPANIC OR LATINO BY RACE  Universe: Total population  P0020001 P0020002 P0020003 P0020004 P0020005 P0020006 P0020007 P0020008 P0020009 P0020010 P0020011 P0020012 P0020013 P0020014  Total: P0020001   Hispanic or Latino P0020002  Not Hispanic or Latino: P0020003   Population of one race: P0020004   White alone P0020005  Black or African American alone P0020006  American Indian and Alaska Native alone P0020007  Asian alone P0020008  Native Hawaiian and Other Pacific Islander alone P0020009  Some Other Race alone P0020010  Population of two or more races: Population of two races: P0020011"},{"path":[]},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_read.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compile Census 2020 block data for all US states once downloaded and unzipped used by census2020_get_data() — census2020_read","text":"","code":"if (FALSE) { # \\dontrun{  # library(census2020download)  census2020_download('./census2020zip', mystates = c('MD', 'DC'))  census2020_unzip('./census2020zip','./census2020out')  c2 <- census2020_read(folder = './census2020out', mystates = c('MD', 'DC'))  dim(c2)  str(c2)  head(c2)  sum(c2$POP100)  plot(    c2$INTPTLON[substr(c2$GEOCODE,1,2) == '24'],     c2$INTPTLAT[substr(c2$GEOCODE,1,2) == '24'], pch = '.')  c2$LOGRECNO <- NULL  colnames(c2) <- census2020download::census_col_names_map$Rname[     match(colnames(blocks2020), census2020download::census_col_names_map$ftpname)     ]  } # }"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_save_datasets.html","id":null,"dir":"Reference","previous_headings":"","what":"Create separate data.tables, and optionally save them in the EJAM package This is just done when Census FIPS or bounds or points change. — census2020_save_datasets","title":"Create separate data.tables, and optionally save them in the EJAM package This is just done when Census FIPS or bounds or points change. — census2020_save_datasets","text":"Create separate data.tables, optionally save EJAM package just done Census FIPS bounds points change.","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_save_datasets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create separate data.tables, and optionally save them in the EJAM package This is just done when Census FIPS or bounds or points change. — census2020_save_datasets","text":"","code":"census2020_save_datasets(   x,   metadata = NULL,   add_metadata = TRUE,   save_as_data_for_package = FALSE,   overwrite = TRUE )"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_save_datasets.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create separate data.tables, and optionally save them in the EJAM package This is just done when Census FIPS or bounds or points change. — census2020_save_datasets","text":"x single data.table called blocks census2020_get_data(), colnames blockfips, pop, area, lat, lon metadata default Census 2020 related, tries use EJAM package add_metadata logical, whether add EJAM-related metadata date version save_as_data_for_package logical, whether usethis::use_data() overwrite default TRUE, relevant usethis = TRUE","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_save_datasets.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create separate data.tables, and optionally save them in the EJAM package This is just done when Census FIPS or bounds or points change. — census2020_save_datasets","text":"named list huge data.tables EJAM package: bgid2fips blockid2fips blockpoints blockwts quaddata","code":""},{"path":[]},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_unzip.html","id":null,"dir":"Reference","previous_headings":"","what":"unzip Census 2020 zipped files already downloaded, for States and DC, PR — census2020_unzip","title":"unzip Census 2020 zipped files already downloaded, for States and DC, PR — census2020_unzip","text":"unzip Census 2020 zipped files already downloaded, States DC, PR","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_unzip.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"unzip Census 2020 zipped files already downloaded, for States and DC, PR — census2020_unzip","text":"","code":"census2020_unzip(   folder = NULL,   folderout = NULL,   filenumbers = 1,   mystates = NULL )"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_unzip.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"unzip Census 2020 zipped files already downloaded, for States and DC, PR — census2020_unzip","text":"folder Default current working directory. contain .zip file(s) folderout path want put files, created exist filenumbers vector 1,2,3 – default file 1. File01 Tables P1 P2, population counts race ethnicity. File02 Tables P3, P4, H1. File03 Table P5. mystates optional vector 2letter state abbreviations unzip","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_unzip.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"unzip Census 2020 zipped files already downloaded, for States and DC, PR — census2020_unzip","text":"Vector filenames unzipped contents","code":""},{"path":[]},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020_unzip.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"unzip Census 2020 zipped files already downloaded, for States and DC, PR — census2020_unzip","text":"","code":"if (FALSE) { # \\dontrun{  # library(census2020download)  census2020_download('./census2020zip', mystates = c('MD', 'DC'))  census2020_unzip('./census2020zip','./census2020out')  c2 <- census2020_read(folder = './census2020out', mystates = c('MD', 'DC'))  save(c2, file = 'census2020blocks.rdata')  dim(c2)  str(c2)  head(c2)  sum(c2$POP100)  plot(c2$INTPTLON[substr(c2$GEOCODE,1,2)=='24'], c2$INTPTLAT[substr(c2$GEOCODE,1,2)=='24'], pch='.')  } # }"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020download.html","id":null,"dir":"Reference","previous_headings":"","what":"2020 Census Blocks and Tools to Download from FTP — census2020download","title":"2020 Census Blocks and Tools to Download from FTP — census2020download","text":"Basic functions downloading FTP, unzipping, reading 2020 Census data US States single data.table, splitting tables use EJAM package.","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020download.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"2020 Census Blocks and Tools to Download from FTP — census2020download","text":"package just set helper functions used EJAM package. creates block datasets (blockgroup tables) use EJAM package. basic functions downloading FTP, unzipping, reading 2020 Census data US States data.table format. can retain key variables like lat lon block internal point FIPS codes population count weight area (effective radius) information see census2020download package documentation census2020download package github repository EJAM package Census vs ACS geos info Key functions data.tables created include census2020_get_data() Download/ Unzip/ Read/ Clean data US Census blocks census2020_save_datasets() Use data create separate data.tables, save use EJAM package. Key data.table objects created: blockid2fips - data.table FIPS code blockid lookup blockpoints  - data.table latitude longitude internal points quaddata - data.table xyz format locations blocks, used create spatial index blocks EJAM package. blockwts - data.table Census 2020 population-based weight fraction parent block group population, size block","code":""},{"path":[]},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census2020download.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"2020 Census Blocks and Tools to Download from FTP — census2020download","text":"Maintainer: Mark Corrales corrales.mark@epa.gov","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census_col_names_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Table that maps some Census variable names to short friendly variable names — census_col_names_map","title":"Table that maps some Census variable names to short friendly variable names — census_col_names_map","text":"Table maps Census variable names short friendly variable names","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/census_col_names_map.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Table that maps some Census variable names to short friendly variable names — census_col_names_map","text":"data.frame:\t19 obs.  3 variables: $ ftpname : chr  \"LOGRECNO\" \"GEOCODE\" \"AREALAND\" \"AREAWATR\" ... $ Rname   : chr  \"logrecno\" \"blockfips\" \"arealand\" \"areawater\" ... $ longname: chr  \"logical record number\" \"15 digit Census FIPS\"  etc.","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/lookup_states.html","id":null,"dir":"Reference","previous_headings":"","what":"basic information about US States from 2023 — lookup_states","title":"basic information about US States from 2023 — lookup_states","text":"FIPS code, name, etc., State, DC, PR, Island Areas","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/lookup_states.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"basic information about US States from 2023 — lookup_states","text":"data.frame  \t58 obs.  26 variables $ statename       : chr  \"Alabama\" \"Alaska\" \"Arizona\" \"Arkansas\" ... $ FIPS.ST         : chr  \"01\" \"02\" \"04\" \"05\" ... $ ST              : chr  \"AL\" \"AK\" \"AZ\" \"AR\" ... $ ftpname         : chr  \"Alabama\" \"Alaska\" \"Arizona\" \"Arkansas\" ... $ REGION          : num  4 10 9 6 9 8 1 3 3 4 ... $ .usa.plus.pr  : logi  TRUE TRUE TRUE TRUE TRUE TRUE ... $ .usa          : logi  TRUE TRUE TRUE TRUE TRUE TRUE ... $ .state        : logi  TRUE TRUE TRUE TRUE TRUE TRUE ... $ .contiguous.us: logi  TRUE FALSE TRUE TRUE TRUE TRUE ... $ .island.areas : logi  FALSE FALSE FALSE FALSE FALSE FALSE ... $ area.sqmi       : int  52420 665384 113990 53179 163695 104094 5543 2489 68 65758 ... $ area.sqkm       : int  135767 1723337 295234 137732 423967 269601 14357 6446 177 170312 ... $ landarea.sqmi   : int  50645 570641 113594 52035 155779 103642 4842 1949 61 53625 ... $ landarea.sqkm   : int  131171 1477953 294207 134771 403466 268431 12542 5047 158 138887 ... $ waterarea.sqmi  : int  1775 94743 396 1143 7916 452 701 540 7 12133 ... $ waterarea.sqkm  : int  4597 245383 1026 2961 20501 1170 1816 1399 19 31424 ... $ inland.sqmi     : int  1058 19304 396 1143 2833 452 171 91 7 5027 ... $ inland.sqkm     : int  2740 49997 1026 2961 7339 1170 443 237 19 13019 ... $ coastal.sqmi    : num  517 26119 0 0 245 ... $ coastal.sqkm    : num  1340 67647 0 0 634 ... $ greatlakes.sqmi : num  0 0 0 0 0 0 0 0 0 0 ... $ greatlakes.sqkm : num  0 0 0 0 0 0 0 0 0 0 ... $ territorial.sqmi: num  199 49320 0 0 4837 ... $ territorial.sqkm: num  516 127739 0 0 12528 ... $ lat             : num  32.7 63.3 34.2 34.9 37.1 ... $ lon             : num  -86.8 -152.8 -111.6 -92.4 -119.5 ...","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/lookup_states.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"basic information about US States from 2023 — lookup_states","text":"","code":"str(lookup_states) #> 'data.frame':\t58 obs. of  26 variables: #>  $ statename       : chr  \"Alabama\" \"Alaska\" \"Arizona\" \"Arkansas\" ... #>  $ FIPS.ST         : chr  \"01\" \"02\" \"04\" \"05\" ... #>  $ ST              : chr  \"AL\" \"AK\" \"AZ\" \"AR\" ... #>  $ ftpname         : chr  \"Alabama\" \"Alaska\" \"Arizona\" \"Arkansas\" ... #>  $ REGION          : num  4 10 9 6 9 8 1 3 3 4 ... #>  $ is.usa.plus.pr  : logi  TRUE TRUE TRUE TRUE TRUE TRUE ... #>  $ is.usa          : logi  TRUE TRUE TRUE TRUE TRUE TRUE ... #>  $ is.state        : logi  TRUE TRUE TRUE TRUE TRUE TRUE ... #>  $ is.contiguous.us: logi  TRUE FALSE TRUE TRUE TRUE TRUE ... #>  $ is.island.areas : logi  FALSE FALSE FALSE FALSE FALSE FALSE ... #>  $ area.sqmi       : int  52420 665384 113990 53179 163695 104094 5543 2489 68 65758 ... #>  $ area.sqkm       : int  135767 1723337 295234 137732 423967 269601 14357 6446 177 170312 ... #>  $ landarea.sqmi   : int  50645 570641 113594 52035 155779 103642 4842 1949 61 53625 ... #>  $ landarea.sqkm   : int  131171 1477953 294207 134771 403466 268431 12542 5047 158 138887 ... #>  $ waterarea.sqmi  : int  1775 94743 396 1143 7916 452 701 540 7 12133 ... #>  $ waterarea.sqkm  : int  4597 245383 1026 2961 20501 1170 1816 1399 19 31424 ... #>  $ inland.sqmi     : int  1058 19304 396 1143 2833 452 171 91 7 5027 ... #>  $ inland.sqkm     : int  2740 49997 1026 2961 7339 1170 443 237 19 13019 ... #>  $ coastal.sqmi    : num  517 26119 0 0 245 ... #>  $ coastal.sqkm    : num  1340 67647 0 0 634 ... #>  $ greatlakes.sqmi : num  0 0 0 0 0 0 0 0 0 0 ... #>  $ greatlakes.sqkm : num  0 0 0 0 0 0 0 0 0 0 ... #>  $ territorial.sqmi: num  199 49320 0 0 4837 ... #>  $ territorial.sqkm: num  516 127739 0 0 12528 ... #>  $ lat             : num  32.7 63.3 34.2 34.9 37.1 ... #>  $ lon             : num  -86.8 -152.8 -111.6 -92.4 -119.5 ... #>  - attr(*, \"CensusVersion\")= chr \"2020\""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/quaddata.html","id":null,"dir":"Reference","previous_headings":"","what":"xyz location of internal point of each Census 2020 block, for spatial index in EJAM — quaddata","title":"xyz location of internal point of each Census 2020 block, for spatial index in EJAM — quaddata","text":"data.table use EJAM","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/quaddata.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"xyz location of internal point of each Census 2020 block, for spatial index in EJAM — quaddata","text":"See EJAM package info. Created census2020_get_data() census2020_save_datasets() package can create data table store . Rows: 8,174,955 Columns: blockid (joins among tables blockwts, blockpoints, quaddata, blockid2fips) unique integer 1 number rows (blocks), used efficient ID 15-character FIPS code. x, y, z coordinates shown :","code":"str(quaddata)    Classes ‘data.table’ and 'data.frame':\t8174955 obs. of  4 variables:     $ BLOCK_X: num  205 205 204 204 204 ...    $ BLOCK_Z: num  2125 2125 2125 2126 2126 ...    $ BLOCK_Y: num  -3334 -3334 -3334 -3334 -3334 ...    $ blockid: int  1 2 3 4 5 6 7 8 9 10 ...       - attr(*, \".internal.selfref\")=<externalptr>      - attr(*, \"sorted\")= chr \"blockid\"      - attr(*, \"census_version\")= num 2020      - attr(*, \"acs_version\")= chr \"2016-2020\"      - attr(*, \"ejscreen_version\")= chr \"2.1\"      - attr(*, \"ejscreen_releasedate\")= chr \"September 2022\""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/radius_miles_from_area_sqmi.html","id":null,"dir":"Reference","previous_headings":"","what":"helper - just calculates radius from area Just the square root of (area/pi) — radius_miles_from_area_sqmi","title":"helper - just calculates radius from area Just the square root of (area/pi) — radius_miles_from_area_sqmi","text":"helper - just calculates radius area Just square root (area/pi)","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/radius_miles_from_area_sqmi.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"helper - just calculates radius from area Just the square root of (area/pi) — radius_miles_from_area_sqmi","text":"","code":"radius_miles_from_area_sqmi(area_sqmi)"},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/radius_miles_from_area_sqmi.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"helper - just calculates radius from area Just the square root of (area/pi) — radius_miles_from_area_sqmi","text":"area_sqmi vector areas blocks square miles. area available square meters, can converted like : area_sqmeters <- 100000 area_sqmi <- census2020download:::area_sqmi_from_area_sqmeters(area_sqmeters) radius <- radius_miles_from_area_sqmi(area_sqmi)","code":""},{"path":"https://ejanalysis.github.io/census2020download/, https://github.com/ejanalysis/census2020download/reference/radius_miles_from_area_sqmi.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"helper - just calculates radius from area Just the square root of (area/pi) — radius_miles_from_area_sqmi","text":"vector numbers shape input","code":""},{"path":[]}]
